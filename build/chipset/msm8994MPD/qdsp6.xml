<?xml version="1.0"?>
<!DOCTYPE image SYSTEM "weaver-1.0.dtd">
 <!-- This file is manually maintained, it is used as an input file to xmlcreate.pl. -->
 <!-- xmlrecate.pl will compare the memory definition in q6_memory_defns.h with qdsp6_8960.xml -->
 <!--If there is any inconsistency. q6_memory_defns.h has higher priority. -->  
 <!-- Then, qurt config xml will be generated by xmlcreate.pl and it will be used by qurt kernel only -->
<image>
    <machine>

      <Hexagon_ss_base value = "0xFE280000" />
      <!-- <tcxo intmask="0x10000000"/>     commented for merging -->
      <tcxo intmask="0xffffffff"/>
            <max_island_interrupts value="20"/>

      <timer>
        <base value = "0xFE2A0000" />
        <intno value = "2" />
        <priority value="2" />
        <bitmask value = "0xff" />
        <IST_priority value="1" />
        <IST_bitmask value="0xff" />
      <IST_tcb_partition value="1"/> 
      </timer>

      <chicken_bits>
        <rgdr value = "0x00000000" />
        <rgdr_2nd value="0x00000000" />  
        <acc0 value = "0x00000000" />
        <acc1 value = "0x00000000" />
        <chicken value = "0x08200000"/>
        <chicken_2nd value="0x08001004" />
		<!--Q6-V4 IC corruption issue workaround-->
		  <!-- <chicken value = "0x2000"/>    commented for merging-->
      </chicken_bits>
        <isdb_imem addr="0xFE87F93C" />
        <etm_cfg_base addr="0xFE590000" />
		
      <!-- For v4, disable all _*dprefetch -->
      <cache>
        <l1_iprefetch     enabled="true" lines="2"/>
        <l1_dprefetch     enabled="true" lines="1"/>
        <l1_ipartition    main="full"/>
        <l1_dpartition    main="full"/>
        <l2_iprefetch 	  enabled="true" lines="2"/>
        <l2_dprefetch     enabled="false"/>
        <l2_partition     main="full"/>
        <l2_writeback     enabled="true"/>
        <l2_size          value="256"/>
      </cache>

      <cache_policy name="l1_wb_l2_uncacheable" value="0x0"/>
      <cache_policy name="writethrough" value="0x1"/>
      <cache_policy name="l1_wt_l2_cacheable" value="0x5"/>
      <cache_policy name="l1_wb_l2_cacheable" value="0x7"/> 
      <cache_policy name="uncached" value="0x4"/>
      <cache_policy name="uncache_shared" value="0x6"/>

      <timetest_port value="0x0" />
      
      <!-- If the enabled value is set to "true" DMT is enabled -->
      <dynamic_multi_threading enabled="true" />
      
    </machine>

    <kernel>
      <hthread_mask value = "0x3F" />
      <heap_size value = "0X80000"/>
      <max_threads value = "320"/>
      <max_threads_in_tcm value = "13"/>
      <max_futexes value = "16384"/>      
      <trace_mask value = "0X020007ff"/>
      <trace_size value = "65536" />
      <qurtos_stack_size value = "4096"/>
      <qurtos_island_stack_size value = "2048"/>
      <heap_size_island value="22K"/>
      <tcm_size value = "0x40000"/>
      <dynamic_tlb_reservation value="24"/>
    </kernel>

    <physical_pool name="ADSP_DRIVER_POOL">
        <region base="0xf0000000" size="0x10000000" />
    </physical_pool>      

    <physical_pool name="DEFAULT_PHYSPOOL">
		<!-- For 8960, we are keeping ADSP max image size at 16 MB, but advertised size is 24 MB, leaving room for future expansion.-->
        <region base="0x0c800000" size="0x01800000" />
    </physical_pool>

    <physical_pool name="DRIVER_POOL">
        <region base="0x04A00000" size="0x00001000" />
        <region base="0xfe000000" size="0x00280000" />   
    </physical_pool>    

    <physical_pool name="TCM_PHYSPOOL">
        <region base="0xfe400000" size="0x400000" />
    </physical_pool>    
    
	 <physical_pool name="riva_fm_reg_pool">
        <region base="0xFB1A0000" size="0x4000" />
    </physical_pool>
    <physical_pool name="lpass_reg_pool">
        <region base="0xfe000000" size="0x1000" />
    </physical_pool>

     <!--physical_pool name="LPM_PHYSPOOL"-->
        <!--region base="0xfe090000" size="0x10000" /-->
    <!--/physical_pool-->

    <physical_pool name="qdsp6ss_reg_pool">
        <region base="0xfe200000" size="0x1000" />
    </physical_pool>

	<!--
    <physical_pool name="adsp_reg_pool">
        <region base="0xfe280000" size="0x4000" />
    </physical_pool>
	-->
	
    <physical_pool name="smd_reg_pool">
        <region base="0xfe285000" size="0x1000" />
    </physical_pool>

    <physical_pool name="adsp_clk_reg_pool">
        <region base="0xfe288000" size="0x8000" />
    </physical_pool>

    <physical_pool name="sirc_reg_pool">
        <region base="0xfe290000" size="0x10000" />
    </physical_pool>

    <physical_pool name="saw_reg_pool">
        <region base="0xfe2b0000" size="0x1000" />
    </physical_pool>

    <!--smem pool    -->
    <physical_pool name="smem_pool">
        <region base="0x06a00000" size="0x00200000" />
    </physical_pool>

    <physical_pool name="EBI1_pool">
        <region base="0x00000000" size="0xffffffff" />
    </physical_pool>     

	<physical_pool name="SHARED_EFS">
        <region base="0x0FD60000" size="0x20000" />
    </physical_pool>

	
	<!-- The commented map is according to 8960 April 14 2011 memory map  -->
	<!-- EBI pool start should not include Shared memory, which is used only by SMD driver -->
    <!--physical_pool name="EBI1_pool"> <region base="0x80200000" size="0x3fe00000" /> </physical_pool -->
	
	<!-- This pool is added only for 8960v1 in order to prevent accidental usage of v4 enhanced circ buffer -->
	<!-- Due to 8960v1 issue, virtual addresses 0x7ffe_0000 through 0x7fff_ffff cannot be used for a v4 enhanced circ buffer -->
	<!-- This physical address can be anywhere, it need not be virtual = physical -->
    <!--physical_pool name="DO_NOT_USE_POOL"-->
        <!--region base="0x3ffe0000" size="0x20000" /-->
    <!--/physical_pool-->
	
	<physical_pool name="HWIO_POOL">  
        <region base="0xFA000000" size="0x1000000" />
        <region base="0xFC300000" size="0x80000" />
    </physical_pool>

	
	<physical_pool name="RFSA_pool">
		<region base="0x0fd60000" size="0x20000" /> 
	</physical_pool>
	
	
    <program name="LPASS">

      <stack_size value = "0x2000" />
	  <!-- This HAS TO BE kept the same as in q6_memory_defns.h-->
      <heap_size name="heap_size" value = "0x680000" />
      <main_priority value = "1" />
		<!-- Some of the following sections don't have the physical pool mentioned, so physical = virtual.-->
		<!-- Some sections later in the file have a physical pool mentioned, so, virtual address will be mapped to the mentioned physical pool.-->
		
	 <!--RIVA: FM  -->
       <memsection   direct="true" 
                     attach="RW" 

                     virt_addr="0xFB1A0000"
                     size="4K"
                     cache_policy="uncached" />
     <!--RIVA: CCU_CCU_MB0_CONTROL  -->
      <memsection   direct="true" 
                    attach="RW" 

                    virt_addr="0xFB206000"
                    size="4K"
                    cache_policy="uncached" />
      <!--RIVA: CMEM SRAM 2  -->
      <memsection   direct="true" 
                    attach="RW" 

                    virt_addr="0xFB290000"
                    size="64K"
                    cache_policy="uncached" />	  
	  <!-- HDMI CONTROL (hdmi_reg_pool) MMSS_HDMI_CTRL in IPCATLOG -->
      <memsection   direct="true" 
                    attach="RW" 

                    virt_addr="0xFD9A8000"
                    size="4K"
                    cache_policy="uncached" />

      <memsection   direct="true" 
                    attach="RW" 
                    physpool="smem_pool"
                    virt_addr="0x06a00000"
                    size="1024K"
                    cache_policy="uncached" />
      <memsection   direct="true" 
                    attach="RW" 
                    physpool="smem_pool"
                    virt_addr="0x06b00000"
                    size="1024K"
                    cache_policy="uncached" />  
     
   
      <include file="../../core/api/systemdrivers/hwio/msm8994/msmhwioplat.xml" />

      <memsection direct="true"
                  tlb_lock = "1"  
                  attach="RW" 
                  virt_addr="0xfe200000"
                  size="1024K"
                  glob = "1"                          
                  cache_policy="uncached" /> 

      <memsection direct="true" 
                  attach="rw" 
                  virt_addr="0xfe590000" 
                  size="0x00001000" 
                  cache_policy="uncached" />  <!-- ETM_BASE --> 				  

	   <!-- shared IMEM for debug purposes-->
	   <memsection direct="true"
                  attach="r"
                  virt_addr="0xFE87C000"
                  size="0x04000"
                  cache_policy="uncached" />

      <memsection direct="false" 
                  attach="rw" 
                  virt_addr="0xee000000" 
                  phys_addr="0xfe000000" 
                  size="0x00040000" 
                  cache_policy="uncached" />  <!-- LPASS_LPASS_BASE -->    

      <memsection direct="false" 
                  attach="rw" 
                  virt_addr="0xee040000" 
                  phys_addr="0xfe040000" 
                  size="0x00040000" 
                  cache_policy="uncached" />  <!-- LPASS_LPASS_BASE -->  

      <memsection direct="false" 
                  attach="rw" 
                  virt_addr="0xee080000" 
                  phys_addr="0xfe080000" 
                  size="0x00040000" 
                  cache_policy="uncached" />  <!-- LPASS_LPASS_BASE -->  

      <memsection direct="false" 
                  attach="rw" 
                  virt_addr="0xee100000" 
                  phys_addr="0xfe100000" 
                  size="0x00100000" 
                  cache_policy="uncached" />  <!-- LPASS_LPASS_BASE -->                  

      <memsection direct="false" 
                  attach="rw" 
                  virt_addr="0xee200000" 
                  phys_addr="0xfe200000" 
                  size="0x00100000" 
                  cache_policy="uncached" />  <!-- LPASS_LPASS_BASE -->                  

      <memsection direct="false" 
                  attach="rw" 
                  virt_addr="0xee300000" 
                  phys_addr="0xfe300000" 
                  size="0x00100000" 
                  cache_policy="uncached" />  <!-- LPASS_LPASS_BASE --> 


      <memsection attach="ISLAND"
                  phys_addr="0xfe400000"
                  size="256K"
                 cache_policy="l1_wb_l2_uncacheable"/>  <!-- LPASS_ISLAND -->
                  
    </program>

	<program name="M8994AAAAAAAAQ1234.pbn">
      <include file="../../core/api/systemdrivers/irqs/msm8994/root_interrupts.xml"/>
    </program>

    <program name="M8994AAAAAAAAQ1234_AUDIO.pbn">
      <include file="../../avs/build/msm8994/audio_interrupts.xml"/>
    </program>

</image>

